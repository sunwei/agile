# 主干开发

想写主干开发，因为这已经成了习惯，每天坚持写一些东西，尽量写一些思考。

正巧碰上偶像刘德华40周年抖音直播，从八点半开始，一直看到结束，看到八千多万的参与人数。

挺感动的，40年如一日，对于华仔来说，又是平常的一天。

主干开发要求高不高，高，很高，对个人，对团队，对管理，要求都高。

难不难，难，很难，改变大家的习惯难，让大家理解主干开发的思想难，让团队坚持主干开发，不走形，更难。

但就像今天偶像的直播主题一样，如果这就是平常的一天，一如既往的优秀，有什么事情还能阻挡我们的脚步呢！

## 主干开发是什么样的体验

挺开心的，不用在分支之间切来切去，也不用到最后解决各种冲突，基本上每天都有代码提交到主干上，并且代码库随时处于发布状态。

刚开始接触的时候，感觉有点束手束脚，因为多了很多需要了解的地方。

比如提交流程，提交前会在本地自动触发单元测试，只有通过了本地测试，才能提交成功。

要关心流水线状态，提交前要看流水线状态是不是健康的，通常绿色代表健康，只有绿色的时候，才能提交，并且要先拉取最新代码，再提交。
也会有冲突，但冲突不是那么剧烈，完全在可接受范围内，因为提交的量不大。
如果是红的，也就是说出错了，吼一嗓子，通常有声音会回复你说，正在修。

要控制好节奏，为了让流水线一直处于健康状态，通常在下班前不会大量提交代码，因为如果出现错误，就需要立刻修复，因为流水线红了不过夜的传统。
那会不会一天都不提交代码，这也不会，因为提交的越晚，你所面对的冲突可能性会越大，这样又是另一种痛苦。
所以在有pair的保证下，大家一起设定好节奏，上午集中注意力在昨天的代码走查修改，并最小步骤提交，下午尽量在4点前完成一张卡。
剩下的时间要么休息一下，要么捡下一张卡，了解上下文，做好开卡准备。
或者看一看其它小伙伴有没有什么需要支持的地方。
再就是干脆放松一下，和团队一起聊聊天，喝喝茶，等等。

总的感觉就是，主干开发能激活大家的积极性，同时对团队的代码工程实践有提出更高的要求，会有一个适应的过程，但最后的结果往往是多赢。




