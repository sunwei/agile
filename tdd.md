# 测试驱动开发

很多代码是没有测试的，纯粹依赖于手工测试。
因为有的项目复杂度并不高，通过有经验的人将代码分成几块，分派下去，就等着大家都做完后，集成起来，一起测试。
在这过程中，集成的时候可能会出现问题，所以互相依赖的模块之间先调通，再做整体测试。
做得好的，功能稳定，一次过。
不好的，得帮助排查定位，看问题到底出在哪个模块。
可以看出，上面这个流程里面的风险无处不在。
任务拆分如果不合理，最后才可能发现问题，改起来已经没有时间了，或者风险已经不可控了。
模块只对外负责，自身质量怎么样，完全靠个人。
写完后联调更是一门技术活，得让人接受是自己代码的问题可不是一件容易的事。
最后大家都按设计集成好了，最后功能还是跑不通或者不满足需求，可以大胆想像一下大家的心情。
如果做到一半或者快验收了，突然告诉你需求改了，还要问你惊不惊喜，意不意外。
有没有一口气走下来，顺顺利利，皆大欢喜的？
当然有，但这得在项目不太复杂，人员水平有保障，团队互相信任，协作流畅的前提下。
不过理论上是存在的。

测试驱动开发就可以解决所有问题了吗？
我们可以接着往下缕缕。


## 测试驱动的感受

第一次接触的时候是Pair时，为了让我能熟悉代码，小伙伴特意选了一张新卡。
然后他帮我讲解怎么开卡，怎么拆分任务，同时用TDD来实现一个个任务。
所有的任务都会写在一张便利贴上，然后贴在我们一起使用的显示器边缘，一目了然，完成一个任务划掉一个任务。
既然叫TDD，那自然是先写测试，因为还没有实现，所以这时候的测试跑起来肯定失败。
实现后，就能让测试通过了。
以此反复，将拆分的任务一个个完成后，自验证，并在本地拉取最新代码，运行单元测试和部分功能测试。
没问题就可以提交了，然后在线上开发环境进行验收。

第一天就能参与一张卡的开发，确实感觉挺棒的。
但因为接触的都是新内容，如果不注意，走了神，那就很容易和周公约会去了。
这时候TDD中任务的拆分很关键，如何能拆得刚刚好，让新人也可以理解，就需要灵活应对了，也是挑战所在。
如何写测试？哪些要写测试？和测试工具，及测试策略息息相关，这里还好我的小伙伴讲得很耐心，也很清楚，反复和我确认。
还有一个明显的感觉就是累，因为所有东西都是新的，需要注意力高度集中，不仅要懂，还要多交流，可以多表达自己的思路。
这样参与感倍儿棒。
当时我就主动要求说休息下，喝喝水。
刚巧也到了下午茶时间，喝喝茶，交流一下感受，既放松，又高效。

总体来说，很新鲜，有点累，个人体验也很棒。

## 什么情况下测试驱动会帮上忙

软件开发，在传统模式下，将团队以功能进行划分，如需求管理一组，开发一组，测试一组，运维一组。
将流程梳理清楚，定义好职责，是一种适合批量生产的模式。
毕竟软件行业相较于传统工业，牙还没换完。

在这种组织里编码时，让我感觉最爽的就是完成自己负责的模块时。
因为模块责任划分后，领导给一个时间对接时间点，其它的时间就自由发挥了，今天快点，明天慢点，完全在自己的掌控中。
程序员的成就感来得简单直接，按自己的设想实现一个功能函数，感觉很棒，完成一个模块，乐在其中，每天都很简单，很满足。
测试也不用写，反正有测试和运维团队。
有经验的BUG就相对会少点，速度也快点。
如果提前完成了模块，还能想干点啥就干点啥。

因为职责划分得太清楚，整个软件开发活动的参与感有限，自己只是其中一个环节的螺丝钉。
软件的成败和自己有关联，但不会上升到商务和法务。
对应的权益也一样，自然也没有太大关联。

如果程序员要写测试，也就是明确说明程序员要对质量负责，对软件运营负责。
难道之前不用负责？
之前也要负责，但软件质量是测试部门成立的原因，线上问题是运营部门成立的原因。

测试加了进来，那为什么要用测试来驱动开发呢？
难道之前不会开发，或者说之前的开发模式有哪些问题？

我的感受是，在以前的模式，有的时候会让自己对写出的代码不够自信，特别是对自己较新的领域，踩过一些没有必要的坑。

那有没有一种方法，可以让自己在面对未知领域时，一样自信，可不可以尽量规避掉一些没有必要的坑？

我觉得TDD是一个可行的选项。
